Device Driver: クイズゲーム用ドライバ   
Copyright (c) 1996-2020 MSX Club Gigamix
(C)1996 GIGAMIX/Influenza

■概要

　MSX用4択クイズゲームの制作時に用いたDMシステム2用デバイスドライバです。
MSX用マルチタップ「忍者タップ」(PCCM製)に対応しています。※同人ハードウェア
最大10人分のボタン入力を同時認識できます。


■インストール方法

　DMシステム2・ユーティリティーディスクのSETUPツールでこのドライバを選択
するのを推奨しますが、手動でインストールする方法をご説明します。

	CLEAR 200,&HC000
	BLOAD "dev-atch.bin",R


////// あたちゃ専用デバイスドライバ内部資料 ///////////////////////////////////
					96/03/14  21:38  いんふるえんざ

■コールエントリー

7830H	DEVINI
　　バージョンチェック(ターボＲなら自己書き換え)
　　NTPTBLの初期化
　　データエリアの設定


7833H	DEVMOU
　　ダミー


7836H	DEVSTK (主に_DMM命令から呼ばれる)

　　NTPTBLにすべてのパッドの状態を保存したあと、方向キーの入力状態を返す。
　　DMMDEV(4300H+65)に入力のあったパッドの番号を保存する。
　　優先順位は、キーボード１、キーボード２、ポート１、ポート２の順。


7839H	DEVTRG (主に_DMM命令から呼ばれる)

　　NTPTBLにすべてのパッドの状態を保存したあと、トリガーの入力状態を返す
　　DMMDEV(4300H+65)に入力のあったパッドの番号を保存する。
　　優先順位は、キーボード１、キーボード２、ポート１、ポート２の順。


783CH	GET10P (あたちゃの１０秒入力ルーチンから呼ばれる)

　　NTPTBLにすべてのパッドの状態を保存する
　　HLには常にNTPTBLを指す。


■データエリア
783FH	RESULT	ポートの接続状況
		　Bit0	ポート１の状況
		　Bit1	ポート２の状況

		DEVINI実行時、忍者タップが接続されていればセットされる


7840H	MAX	接続可能なパッドの最大数
		　2(1+1)、5(1+4,4+1)、8(4+4)のいずれかの値が入る


7841H	ID1	不使用
7842H	ID2	不使用


■ワークエリア
79F6H	NTPTBL　すべてのパッドの入力状態

		    忍者なし	ﾎﾟｰﾄ1忍者   ﾎﾟｰﾄ2忍者   忍者タップx2
		+0  キーボード1	キーボード1 キーボード1	キーボード1
		+1  キーボード2	キーボード2 キーボード2	キーボード2
		+2  パッド1	パッド1-1   パッド1	パッド1-1
		+3  パッド2	パッド1-2   パッド2-1	パッド1-2
		+4  ----	パッド1-3   パッド2-2	パッド1-3
		+5  ----	パッド1-4   パッド2-3	パッド1-4
		+6  ----	パッド2     パッド2-4	パッド2-1
		+7  ----	----	    ----	パッド2-2
		+8  ----	----	    ----	パッド2-3
		+9  ----	----	    ----	パッド2-4

		キー入力に対応するビットが 0 となる。
		表中の ---- にはDEVINIのコール時に 0FFH が書き込まれる。

		High |Ａ|Ｂ|無|無|上|下|左|右| Low


■コピーライト・利用条件

当ソフトウェアの著作権はMSX Club Gigamix(略称:Gigamix)が所有しています。
当ソフトウェアで用いられている全てのバイナリおよびソースコードは、
Apache 2.0ライセンスで配布します。

当ソフトウェアは誰でも自由に複製・改変し、使用・販売することができます。
ソースリストも添付します。ご自身のプログラムに組み込むことができます。
当ソフトウェアを利用した結果生じたいかなる障害に対して、
作者は一切の責任を負いません。使用者の責任のもとに使用してください。

当ソフトウェアは、Apache 2.0ライセンスで配布された製作物が含まれます。
This software includes the work that is distributed in the Apache License 2.0.
http://www.apache.org/licenses/LICENSE-2.0


■連絡先

Website https://www.gigamix.jp/
Twitter @nf_ban (Takashi Kobayashi)
E-mail nf_ban@gigamix.jp (Takashi Kobayashi)
